<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" type="image/png" href="img/favicon-compact.png" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" />

    <link href="css/style.css?v3" rel="stylesheet" />

    <title>R2E2: Path Tracing on Thousands of Cloud CPUs</title>
  </head>

  <body
    data-bs-spy="scroll"
    data-bs-target="main-navbar"
    data-bs-offset="160"
    tabindex="0">
    <div class="nav-menu fixed-top">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <nav id="main-navbar" class="navbar navbar-light navbar-expand-lg">
              <a class="navbar-logo" href="index.html">
                <img src="img/logo-horizontal.svg" />
              </a>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbar"
                aria-controls="navbar"
                aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbar">
                <ul class="navbar-nav ms-auto">
                  <li class="nav-item">
                    <a class="nav-link active" href="#home">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#intro">At a Glance</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#in-action">Demo</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#paper">Paper</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#tech-video">Tech Video</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#faq">FAQ</a>
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      href="https://github.com/r2t2-project/r2t2">
                      <i class="bi-github"></i>
                    </a>
                  </li>
                </ul>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>

    <div id="header">
      <div class="container">
        <div class="row" id="home">
          <div class="col-lg-8">
            <h1 class="pb-3 display-5">
              Path Tracing of Terabyte-Scale Scenes using Thousands of Cloud
              CPUs
            </h1>
          </div>
        </div>

        <div class="row">
          <div class="col-xl-10 px-4 pt-3 pb-2" id="summary">
            <p class="h4">
              R2E2 is a research project that explores the viability of path
              tracing <em>massive scenes</em> using a
              &OpenCurlyDoubleQuote;supercomputer&CloseCurlyDoubleQuote;
              constructed on-the-fly from
              <em>thousands of small cloud computing nodes</em>.
            </p>

            <p class="lead">
              R2E2 is a scene decomposition-based parallel renderer that rapidly
              acquires thousands of cloud CPU cores, loads scene geometry from a
              pre-built scene BVH into the aggregate memory of these nodes in
              parallel, and performs full path traced global illumination.
              Scenes with up to a terabyte of geometry and texture data can be
              path traced in tens of seconds using thousands of tiny compute
              nodes.
            </p>

            <p class="lead">
              R2E2 is a research project at
              <a href="https://www.stanford.edu">Stanford University</a>. The
              research paper and raw data are open-access, and the
              implementation is open-source.
            </p>

            <p>
              <a
                href="#paper"
                role="button"
                class="btn btn-lg btn-primary mt-1">
                <i class="bi bi-journal-text"></i> Research Paper
              </a>

              <a
                href="#in-action"
                role="button"
                class="btn btn-lg btn-secondary mt-1">
                <i class="bi bi-play-circle"></i> Demo Video
              </a>

              <a
                href="https://github.com/r2t2-project/r2t2"
                role="button"
                class="btn btn-lg btn-secondary mt-1">
                <i class="bi bi-github"></i> Source Code
              </a>
            </p>
          </div>

          <div class="col-lg-6"></div>
        </div>

        <div class="row">
          <div class="col-lg-12"></div>
        </div>
      </div>

      <div id="moana-image-copyright" class="pe-2 pb-2 pt-3">
        <a href="https://www.disneyanimation.com/resources/moana-island-scene/">
          <i class="bi-info-square"></i>
          <span class="hidden-text">
            Moana Island Scene. &copy;2017-2022 Disney Enterprises, Inc. All
            rights reserved.
          </span>
        </a>
      </div>
    </div>

    <div id="intro" class="container pt-5 pb-4">
      <div class="row pb-4">
        <div class="col-lg-12 text-center">
          <h1 class="display-5">
            <img src="img/logo-horizontal.svg" /> at a Glance
          </h1>
        </div>
      </div>

      <div class="row g-lg-5">
        <div class="col-lg-6 pb-5 d-flex flex-column justify-content-between">
          <h2 class="intro-title pb-2">
            <div class="number-circle">1</div>
            R2E2 decomposes the scene geometry and textures into tiny (100s of
            MB) objects, and puts them in a blob store.
          </h2>

          <img src="img/intro/slide0.svg" class="img-fluid" />
        </div>
        <div class="col-lg-6 pb-5 d-flex flex-column justify-content-between">
          <h2 class="intro-title">
            <div class="number-circle">2</div>
            At artist's request, the system quickly boots up thousands of tiny
            compute nodes.
          </h2>

          <img src="img/intro/slide1.svg" class="img-fluid" />
        </div>
      </div>

      <div class="row g-lg-5">
        <div class="col-lg-6 pb-5 d-flex flex-column justify-content-between">
          <h2 class="intro-title">
            <div class="number-circle">3</div>
            Nodes fetch scene objects from the blob store, and become
            responsible for servicing thier objects.
          </h2>

          <img src="img/intro/slide2.svg" class="img-fluid" />
        </div>

        <div class="col-lg-6 pb-5 d-flex flex-column justify-content-between">
          <h2 class="intro-title">
            <div class="number-circle">4</div>
            Nodes cooperate and move rays among each other to perform standard
            fire-and-forget path tracing.
          </h2>

          <img src="img/intro/slide3.svg" class="img-fluid" />
        </div>
      </div>

      <div class="row g-lg-5 justify-content-center">
        <div class="col-lg-6 pb-5 d-flex flex-column justify-content-between">
          <h2 class="intro-title">
            <div class="number-circle"><i class="bi bi-asterisk"></i></div>
            R2E2 architecture can scale to terabyte-scale scenes and thousands
            of compute nodes.
          </h2>
        </div>
      </div>
    </div>

    <div id="content">
      <div class="section pt-4 pb-4">
        <div class="container">
          <div class="row g-lg-5" id="in-action">
            <div class="col-lg-6">
              <h3><i class="bi-play-circle"></i> Demo Video</h3>

              <p>
                The video shows a real-time screen capture of rendering
                <a href="">the Moana Island scene</a> using R2E2 on 2,000 tiny
                nodes on AWS Lambda.
              </p>

              <ul class="list-group pb-4">
                <li class="list-group-item">
                  <span><i class="bi bi-info-circle"></i></span>
                  Each node features 4 GB of memory and 3 vCPUs; an aggergate of
                  8 TB of memory and 6,000 vCPUs.
                </li>
                <li class="list-group-item">
                  <span><i class="bi bi-info-circle"></i></span>
                  The scene is decomposed into &Tilde;1 GB objects and is stored
                  on S3 object store.
                </li>
                <li class="list-group-item">
                  <span><i class="bi bi-info-circle"></i></span>
                  For demo purposes, the upfront preprocessing has already been
                  done and has generated the weights for scene objects.
                </li>
                <li class="list-group-item">
                  <span><i class="bi bi-info-circle"></i></span>
                  When the job is invoked, R2E2 immediately boots up thousands
                  of nodes from zero.
                </li>
              </ul>
            </div>

            <div class="col-lg-6">
              <div class="ratio ratio-16x9 video-container">
                <iframe
                  src="https://www.youtube-nocookie.com/embed/g2YqYYo_ZVI?modestbranding=1&rel=0&iv_load_policy=3&theme=light&color=white"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen></iframe>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="section pt-4 pb-4">
        <div class="container">
          <div class="row g-lg-5" id="paper">
            <div class="col-lg-6">
              <h3><i class="bi-journal-text"></i> Research Paper</h3>

              <p>
                <a class="link-dark" href="https://sadjad.org">Sadjad Fouladi</a
                >,
                <a class="link-dark" href="https://cs.stanford.edu/~bps"
                  >Brennan Shacklett</a
                >,
                <a class="link-dark" href="https://faitpoms.com/">Fait Poms</a>,
                <a class="link-dark" href="https://github.com/Arjun-Arora"
                  >Arjun Arora</a
                >,
                <a class="link-dark" href="https://cs.stanford.edu/~aozdemir/"
                  >Alex Ozdemir</a
                >,
                <a class="link-dark" href="https://deeptir.me/"
                  >Deepti Raghavan</a
                >,
                <a
                  class="link-dark"
                  href="https://graphics.stanford.edu/~hanrahan/"
                  >Pat Hanrahan</a
                >,
                <a
                  class="link-dark"
                  href="http://graphics.stanford.edu/~kayvonf/"
                  >Kayvon Fatahalian</a
                >,
                <a class="link-dark" href="https://keithw.org">Keith Winstein</a
                >,
                <strong
                  >&OpenCurlyDoubleQuote;R2E2: Low-Latency Path Tracing of
                  Terabyte-Scale Scenes using Thousands of Cloud
                  CPUs,&CloseCurlyDoubleQuote;</strong
                >
                <em>ACM Transactions on Graphics, July 2022.</em>
              </p>

              <div class="mb-2">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-toggle="collapse"
                  data-bs-target="#bibtex-collapse"
                  aria-expanded="false"
                  aria-controls="bibtex-collapse">
                  BibTeX
                </button>
              </div>

              <pre class="collapse" id="bibtex-collapse" onclick="clip(this)">
@article{fouladi2022r2e2,
  title={{R2E2}: Low-Latency Path Tracing of Terabyte-Scale Scenes using Thousands of Cloud CPUs},
  author={Fouladi, Sadjad and Shacklett, Brennan and Poms, Fait and Arora, Arjun and Ozdemir, Alex and Raghavan, Deepti and Hanrahan, Pat and Fatahalian, Kayvon and Winstein, Keith},
  journal={ACM Transactions on Graphics (TOG)},
  volume={41},
  number={4},
  pages={1--16},
  year={2022},
  publisher={ACM New York, NY}
}</pre
              >
            </div>

            <div class="col-lg-6">
              <a href="data/r2e2-paper.pdf">
                <div class="ratio ratio-16x9" id="paper-first-page"></div>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="section pt-4 pb-4">
        <div class="container">
          <div class="row g-lg-5" id="tech-video">
            <div class="col-lg-6">
              <h3><i class="bi-person-video3"></i> Tech Video</h3>

              <p>
                Tech video will be available during the week of
                <a href="https://s2022.siggraph.org/">SIGGRAPH 2022</a> (Aug
                8&ndash;11).
              </p>
            </div>

            <div class="col-lg-6">
              <!--<div class="ratio ratio-16x9 video-container">
                <iframe
                  src="https://www.youtube-nocookie.com/embed/g2YqYYo_ZVI?modestbranding=1&rel=0&iv_load_policy=3&theme=light&color=white"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen></iframe>
              </div>-->
            </div>
          </div>
        </div>
      </div>

      <div class="section pt-4 pb-4">
        <div class="container">
          <div class="row" id="faq">
            <div class="col-lg-9">
              <h3>
                <i class="bi-patch-question"></i> Frequently Asked Questions
              </h3>

              <h5 class="pt-2">Is R2E2's design specific to AWS Lambda?</h5>

              <p>
                R2E2's architecture makes few assumptions about the underlying
                cloud platform. Our implementation would be portable with little
                effort to other elastic compute services such as Google Cloud
                Run or a cluster of traditional cloud VMs (using bulk insert
                APIs). Porting would require replacing the subroutine to launch
                Lambda workers with code to start workers using other
                platform-specific APIs.
              </p>

              <h5 class="pt-4">
                Will the architecture generalize to other texture formats?
              </h5>

              <p>
                R2E2 only requires that the texture data assigned to a single
                service fits in the memory of a worker. Any texture
                representation that can partition a scene’s texture data into
                small worker-sized chunks is viable. While our current
                implementation uses Ptex, other texture partitioning schemes
                like UDIM (which by design partitions an object’s texture data
                into smaller images) would work as well. An implementation would
                pack individual UDIM images into service-sized partitions, just
                as R2E2 packs Ptex textures into partitions. Regardless of
                texture format, if any texture image exceeds worker memory
                footprint, the image must be broken into subimages and divided
                among services. The current R2E2 implementation supports this
                for large environment light textures: Moana’s 1.6 GB environment
                map image is chunked into smaller tiles, with each tile assigned
                to a different service.
              </p>

              <h5 class="pt-4">
                What if AWS does not provide the required nodes?
              </h5>

              <p>
                R2E2 allocates workers to services and then assigns work to
                these workers as soon as they boot. (It does not wait for all
                workers to boot before computation begins.) R2E2 periodically
                attempts to boot more workers if prior requests fail. If fewer
                than requested workers are obtained, the computation still runs
                to completion, provided there are enough workers for each
                service to have at least one worker. Our current implementation
                <em>does not</em> implement resiliency in the event a
                successfully booted worker fails mid-computation.
              </p>

              <h5 class="pt-4">What's in a name?</h5>

              <table>
                <tr>
                  <td>Really Elastic Ray Engine</td>
                  <td>
                    = <em>R</em> &middot; <em>E</em> &middot;
                    <em>R</em> &middot; <em>E</em>
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td>
                    = (<em>R</em> &middot; <em>E</em>)(<em>R</em> &middot;
                    <em>E</em>)
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td>= (<em>R</em> &middot; <em>E</em>)&sup2;</td>
                </tr>
                <tr>
                  <td></td>
                  <td>
                    = <em>R</em>&sup2; &middot; <em>E</em>&sup2; &nbsp; &#9633;
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="section pt-4 pb-4">
        <div class="container">
          <div class="row g-lg-5" id="acks">
            <div class="col-lg-6">
              <h3><i class="bi bi-hand-thumbs-up"></i> Acknowledgements</h3>

              <p>
                We thank the ACM SIGGRAPH reviewers for their helpful comments
                and suggestions. We are grateful to Matt Pharr, Solomon Boulos,
                Feng Xie, and Marc Brooker for conversations and feedback. This
                work was supported in part by NSF grants 2045714, 2039070,
                2028733, and 1763256, DARPA contract HR001120C0107, a Sloan
                Research Fellowship, and by Google, Huawei, VMware, Dropbox,
                Amazon, and Meta Platforms.
              </p>
            </div>

            <div class="col-lg-6">
              <h3><i class="bi bi-envelope"></i> Contact Us</h3>

              <p>
                <i class="bi bi-at"></i>
                <a href="mailto:r2e2@cs.stanford.edu">r2e2@cs.stanford.edu</a>
                <br />
                <i class="bi bi-pin-map-fill"></i>
                Stanford Computer Science, 353 Jane Stanford Way, Stanford, CA
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section pt-4 pb-4">
      <div class="container">
        <footer
          class="d-flex flex-wrap justify-content-between align-items-center">
          <p class="col-md-4 mb-0 text-muted">
            <img src="img/logo.svg" height="40" style="opacity: 0.5" />
            &copy;2022 Copyright held by the authors.
          </p>
        </footer>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>

    <script>
      function clip(el) {
        var range = document.createRange();
        range.selectNodeContents(el);
        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
      }
    </script>
  </body>
</html>
